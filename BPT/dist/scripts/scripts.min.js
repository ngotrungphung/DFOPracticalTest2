!function(){"use strict";angular.module("BPT.components",["ui.bootstrap"])}(),function(){"use strict";var e={};window&&("function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var n=arguments[t];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Object.assign(e,window.__env)),angular.module("BPT").constant("env",e)}(),function(){"use strict";function e(e,t){e.interceptors.push(["$location","$log","$q",function(e,t,n){function r(e){return 401===e.status?t.error("You are unauthorised to access the requested resource (401)"):404===e.status?t.error("The requested resource could not be found (404)"):500===e.status&&t.error("Internal server error (500)"),n.reject(e)}function o(e){return e}return function(e){return e.then(o,r)}}]),t.hashPrefix(""),e.defaults.headers.get||(e.defaults.headers.get={}),e.defaults.headers.get["If-Modified-Since"]="Mon, 26 Jul 1997 05:00:00 GMT",e.defaults.headers.get["Cache-Control"]="no-cache",e.defaults.headers.get.Pragma="no-cache"}function t(r,o,a){r.page={setTitle:function(e){this.title=e},setDescription:function(e){this.description=e}},r.$on("$routeChangeStart",function(e,t){if(t.$$route){var n=t.$$route.originalPath;a.canAccessPage(n).then(function(e){e||o.path("home")})}}),r.$on("$routeChangeSuccess",function(e,t,n){r.page.setTitle(t.$$route.title||"Home"),r.page.setDescription(t.$$route.description||"")})}angular.module("BPT",["BPT.routes","BPT.components","ngTable","ngLodash","ngCookies","ui.utils.masks"]).config(e).run(t),e.$inject=["$httpProvider","$locationProvider"],t.$inject=["$rootScope","$location","authService"]}(),function(){"use strict";function e(e,t){var n=$("base").first().attr("href");e.when("/home",{title:"Home",description:"Description",templateUrl:n+"app/pages/home/index.html",controller:"HomeController",controllerAs:"vm"}).when("/ctg/fundcenter",{title:"Fund Center",description:"",templateUrl:n+"app/pages/ctg/fundcenter/index.html",controller:"FundCenterController",controllerAs:"vm"}).when("/ctg/ifrscategory",{title:"IRFS Category",description:"",templateUrl:n+"app/pages/ctg/IFRScategory/index.html",controller:"IFRSCategoryController",controllerAs:"vm"}).when("/ctg/attritionrate",{title:"Rate",description:"",templateUrl:n+"app/pages/ctg/attritionrate/index.html",controller:"AttritionRateController",controllerAs:"vm"}).when("/ctg/budgetcodecategory",{title:"Budget Category",description:"",templateUrl:n+"app/pages/ctg/budgetcodecategory/index.html",controller:"BudgetCodeCategoryController",controllerAs:"vm"}).when("/ctg/masterheadcountrelatedbenefit",{title:"Master Headcount Related Benefit",description:"Master Headcount Related Benefit",templateUrl:n+"app/pages/ctg/masterheadcountrelatedbenefit/index.html",controller:"MasterHeadcountRelatedBenefitController",controllerAs:"vm"}).when("/ctg/budgetcode",{title:"Budget Code",description:"",templateUrl:n+"app/pages/ctg/budgetcode/index.html",controller:"BudgetCodeController",controllerAs:"vm"}).when("/ctg/serviceline",{title:"Service line",description:"",templateUrl:n+"app/pages/ctg/serviceline/index.html",controller:"ServiceLineController",controllerAs:"vm"}).when("/ctg/targetde",{title:"Target DE",description:"",templateUrl:n+"app/pages/ctg/targetde/index.html",controller:"TargetDEController",controllerAs:"vm"}).when("/ctg/rbeidepartment",{title:"RBEI Department",description:"",templateUrl:n+"app/pages/ctg/rbeidepartment/index.html",controller:"RBEIDepartmentController",controllerAs:"vm"}).when("/ctg/allocationkey",{title:"Allocation Key",description:"",templateUrl:n+"app/pages/ctg/allocationkey/index.html",controller:"AllocationKeyController",controllerAs:"vm"}).when("/dh/capacitynrecruitment",{title:"Capacity & Recruitment",description:"",templateUrl:n+"app/pages/dh/departmenthead/index.html",controller:"CapacityNRecruitmentController",controllerAs:"vm"}).when("/dh/capacitynrecruitment/create",{title:"Capacity & Recruitment",description:"",templateUrl:n+"app/pages/dh/departmenthead/create.html",controller:"CapacityNRecruitmentController",controllerAs:"vm"}).when("/dh/capacitynrecruitment/edit/:id",{title:"Capacity & Recruitment",description:"",templateUrl:n+"app/pages/dh/departmenthead/edit.html",controller:"CapacityNRecruitmentController",controllerAs:"vm"}).when("/dh/capacitynrecruitment/delete/:id",{title:"Capacity & Recruitment",description:"",templateUrl:n+"app/pages/dh/departmenthead/delete.html",controller:"CapacityNRecruitmentController",controllerAs:"vm"}).when("/dh/departmenthead",{title:"DepartmentHead",description:"",templateUrl:n+"app/pages/dh/departmenthead/index.html",controller:"DepartmentHeadController",controllerAs:"vm"}).when("/dh/departmenthead/create",{title:"DepartmentHead",description:"",templateUrl:n+"app/pages/dh/departmenthead/create.html",controller:"DepartmentHeadController",controllerAs:"vm"}).when("/dh/departmenthead/edit/:id",{title:"DepartmentHead",description:"",templateUrl:n+"app/pages/dh/departmenthead/edit.html",controller:"DepartmentHeadController",controllerAs:"vm"}).when("/dh/departmenthead/delete/:id",{title:"DepartmentHead",description:"",templateUrl:n+"app/pages/dh/departmenthead/delete.html",controller:"DepartmentHeadController",controllerAs:"vm"}).when("/dh/travel",{title:"Travel",description:"",templateUrl:n+"app/pages/dh/departmenthead/index.html",controller:"TravelController",controllerAs:"vm"}).when("/dh/revenue",{title:"Revenue",description:"",templateUrl:n+"app/pages/dh/departmenthead/index.html",controller:"RevenueController",controllerAs:"vm"}).when("/dh/vkmsheet",{title:"VKM Sheet",description:"",templateUrl:n+"app/pages/dh/departmenthead/index.html",controller:"VKMSheetController",controllerAs:"vm"}).when("/dh/vkmbudget",{title:"VKM Budget",description:"",templateUrl:n+"app/pages/dh/vkmbudget/index.html",controller:"VKMBudgetController",controllerAs:"vm"}).when("/dh/itfmcost",{title:"ITFM",description:"",templateUrl:n+"app/pages/dh/departmenthead/index.html",controller:"ITFMCostController",controllerAs:"vm"}).when("/dh/outsourcing",{title:"Outsourcing",description:"",templateUrl:n+"app/pages/dh/departmenthead/index.html",controller:"OutsourcingController",controllerAs:"vm"}).when("/dh/training",{title:"Training",description:"",templateUrl:n+"app/pages/dh/departmenthead/index.html",controller:"TrainingController",controllerAs:"vm"}).when("/dh/salarybudget",{title:"Salary Budget",description:"",templateUrl:n+"app/pages/dh/departmenthead/index.html",controller:"SalaryBudgetController",controllerAs:"vm"}).when("/dh/budgetbooking",{title:"Budgeting",description:"",templateUrl:n+"app/pages/dh/departmenthead/index.html",controller:"BudgetBookingController",controllerAs:"vm"}).when("/dh/budgetbooking/create",{title:"Budgeting",description:"",templateUrl:n+"app/pages/dh/departmenthead/create.html",controller:"BudgetBookingController",controllerAs:"vm"}).when("/dh/budgetbooking/edit/:id",{title:"Budgeting",description:"",templateUrl:n+"app/pages/dh/departmenthead/edit.html",controller:"BudgetBookingController",controllerAs:"vm"}).when("/dh/budgetbooking/delete/:id",{title:"Budgeting",description:"",templateUrl:n+"app/pages/dh/departmenthead/delete.html",controller:"BudgetBookingController",controllerAs:"vm"}).when("/ctg/ifrsreport",{title:"Ifrs report",description:"",templateUrl:n+"app/pages/ctg/ifrsreport/index.html",controller:"IfrsReportController",controllerAs:"vm"}).when("/ctg/fundultilization",{title:"Fund Utilization",description:"",templateUrl:n+"app/pages/ctg/fundultilization/index.html",controller:"BudgetUtilizationController",controllerAs:"vm"}).when("/ctg/personnelcostnvasalary",{title:"Personnel cost & VA salary",description:"",templateUrl:n+"app/pages/ctg/departmenthead/index.html",controller:"PersonnelcostnVAsalaryController",controllerAs:"vm"}).when("/ctg/capacitynrecruitment",{title:"Capacity & Recruitment",description:"",templateUrl:n+"app/pages/ctg/departmenthead/index.html",controller:"CapacityCTGRecruitmentController",controllerAs:"vm"}).when("/ctg/departmenthead",{title:"DepartmentHead",description:"",templateUrl:n+"app/pages/ctg/departmenthead/index.html",controller:"DepartmentHeadController",controllerAs:"vm"}).when("/ctg/travel",{title:"Travel",description:"",templateUrl:n+"app/pages/ctg/departmenthead/index.html",controller:"TravelController",controllerAs:"vm"}).when("/ctg/revenue",{title:"Revenue",description:"",templateUrl:n+"app/pages/ctg/departmenthead/index.html",controller:"RevenueController",controllerAs:"vm"}).when("/ctg/vkmsheet",{title:"VKM Sheet",description:"",templateUrl:n+"app/pages/ctg/departmenthead/index.html",controller:"VKMSheetController",controllerAs:"vm"}).when("/ctg/vkmbudget",{title:"VKM Budget",description:"",templateUrl:n+"app/pages/ctg/departmenthead/index.html",controller:"VKMBudgetController",controllerAs:"vm"}).when("/ctg/itfmcost",{title:"ITFM",description:"",templateUrl:n+"app/pages/ctg/departmenthead/index.html",controller:"ITFMCostController",controllerAs:"vm"}).when("/ctg/outsourcing",{title:"Outsourcing",description:"",templateUrl:n+"app/pages/ctg/departmenthead/index.html",controller:"OutsourcingController",controllerAs:"vm"}).when("/ctg/training",{title:"Training",description:"",templateUrl:n+"app/pages/ctg/departmenthead/index.html",controller:"TrainingController",controllerAs:"vm"}).when("/ctg/salarybudget",{title:"Salary Budget",description:"",templateUrl:n+"app/pages/ctg/departmenthead/index.html",controller:"SalaryBudgetController",controllerAs:"vm"}).when("/ctg/budgetbooking",{title:"Budgeting",description:"",templateUrl:n+"app/pages/ctg/departmenthead/index.html",controller:"BudgetBookingCTGController",controllerAs:"vm"}).when("/ctg/budgetcycle",{title:"Cost Allocation",description:"",templateUrl:n+"app/pages/ctg/departmenthead/index.html",controller:"BudgetCycleController",controllerAs:"vm"}).when("/ctg/masterheadcountrelatedbenefit",{title:"Headcount Related Benefit",description:"",templateUrl:n+"app/pages/ctg/MasterHeadcountRelatedBenefit/index.html",controller:"MasterHeadcountRelatedBenefitController",controllerAs:"vm"}).when("/gm/capacitynrecruitment",{title:"Capacity & Recruitment",description:"",templateUrl:n+"app/pages/gm/departmenthead/index.html",controller:"CapacityGMRecruitmentController",controllerAs:"vm"}).when("/gm/travel",{title:"Travel",description:"",templateUrl:n+"app/pages/gm/departmenthead/index.html",controller:"TravelController",controllerAs:"vm"}).when("/gm/revenue",{title:"Revenue",description:"",templateUrl:n+"app/pages/gm/departmenthead/index.html",controller:"RevenueController",controllerAs:"vm"}).when("/gm/vkmsheet",{title:"VKM Sheet",description:"",templateUrl:n+"app/pages/gm/departmenthead/index.html",controller:"VKMSheetController",controllerAs:"vm"}).when("/gm/vkmbudget",{title:"VKM Budget",description:"",templateUrl:n+"app/pages/gm/departmenthead/index.html",controller:"VKMBudgetController",controllerAs:"vm"}).when("/gm/itfmcost",{title:"ITFM",description:"",templateUrl:n+"app/pages/gm/departmenthead/index.html",controller:"ITFMCostController",controllerAs:"vm"}).when("/gm/budgetbooking",{title:"Budget confirm",description:"",templateUrl:n+"app/pages/gm/departmenthead/index.html",controller:"BudgetBookingGMController",controllerAs:"vm"}).when("/gm/budgetcycle",{title:"Cost Allocation",description:"",templateUrl:n+"app/pages/gm/departmenthead/index.html",controller:"BudgetCycleGMController",controllerAs:"vm"}).when("/dh/dashboard",{title:"Dashboard",description:"",templateUrl:n+"app/pages/ctg/dashboard/index.html",controller:"DashboardController",controllerAs:"vm"}).when("/ctg/dashboard",{title:"Dashboard",description:"",templateUrl:n+"app/pages/ctg/dashboard/index.html",controller:"DashboardController",controllerAs:"vm"}).when("/hr/travel/country",{title:"List of Countries",description:"",templateUrl:n+"app/pages/hr/travel/country/index.html",controller:"CountryController",controllerAs:"vm"}).when("/hr/jmpheadcount",{title:"JMP Head Count",description:"",templateUrl:n+"app/pages/hr/jmpheadcount/index.html",controller:"JMPHeadcountController",controllerAs:"vm"}).when("/hr/personnelcapacity",{title:"Personnel Capacity",description:"",templateUrl:n+"app/pages/hr/personnelcapacity/index.html",controller:"PersonnelCapacityController",controllerAs:"vm"}).when("/hr/departmentheadcount",{title:"Department Head Count",description:"",templateUrl:n+"app/pages/hr/departmentheadcount/index.html",controller:"DepartmentHeadcountController",controllerAs:"vm"}).when("/hr/headcount",{title:"Level-wise Head Count",description:"",templateUrl:n+"app/pages/hr/headcount/index.html",controller:"HeadcountController",controllerAs:"vm"}).when("/hr/headcount/create",{title:"Headcount",description:"",templateUrl:n+"app/pages/hr/headcount/create.html",controller:"HeadcountController",controllerAs:"vm"}).when("/hr/headcount/edit/:id",{title:"Headcount",description:"",templateUrl:n+"app/pages/hr/headcount/edit.html",controller:"HeadcountController",controllerAs:"vm"}).when("/hr/headcount/delete/:id",{title:"Headcount",description:"",templateUrl:n+"app/pages/hr/headcount/delete.html",controller:"HeadcountController",controllerAs:"vm"}).when("/hr/personnelcostnonva",{title:"Personnel cost",description:"",templateUrl:n+"app/pages/hr/personnelcost/index.html",controller:"PersonnelCostController",controllerAs:"vm"}).when("/hr/personnelcostva",{title:"Personnel cost",description:"",templateUrl:n+"app/pages/hr/personnelcost/index.html",controller:"PersonnelCostController",controllerAs:"vm"}).when("/hr/travel/visatype",{title:"Master Visa Type",description:"",templateUrl:n+"app/pages/hr/travel/visaType/index.html",controller:"visaTypeController",controllerAs:"vm"}).when("/hr/travel/visa",{title:"Master Visa",description:"",templateUrl:n+"app/pages/hr/travel/visa/index.html",controller:"visaController",controllerAs:"vm"}).when("/hr/travel/tickettype",{title:"Master Ticket Type",description:"",templateUrl:n+"app/pages/hr/travel/ticketType/index.html",controller:"ticketTypeController",controllerAs:"vm"}).when("/hr/travel/ticket",{title:"Master Ticket",description:"",templateUrl:n+"app/pages/hr/travel/ticket/index.html",controller:"ticketController",controllerAs:"vm"}).when("/hr/travel/allowancetype",{title:"Master Allowance Type",description:"",templateUrl:n+"app/pages/hr/travel/allowanceType/index.html",controller:"allowanceTypeController",controllerAs:"vm"}).when("/hr/travel/allowance",{title:"Master Allowance",description:"",templateUrl:n+"app/pages/hr/travel/allowance/index.html",controller:"AllowanceController",controllerAs:"vm"}).when("/hr/outsourcerole",{title:"Outsource Role",description:"",templateUrl:n+"app/pages/hr/outsourceRole/index.html",controller:"OutsourceRoleController",controllerAs:"vm"}).when("/hr/associatelevel",{title:"Master Associate Level",description:"",templateUrl:n+"app/pages/hr/associateLevel/index.html",controller:"AssociateLevelController",controllerAs:"vm"}).when("/ctg/vafamily",{title:"VA Family Status",description:"",templateUrl:n+"app/pages/ctg/vafamily/index.html",controller:"VAFamilyController",controllerAs:"vm"}).when("/ctg/fund",{title:"Fund Code",description:"",templateUrl:n+"app/pages/ctg/fundcode/index.html",controller:"FundCodeController",controllerAs:"vm"}).when("/ctg/budgetowner",{title:"Budget Owner Assignment",description:"",templateUrl:n+"app/pages/ctg/budgetowner/index.html",controller:"BudgetOwnerController",controllerAs:"vm"}).when("/ctg/department",{title:"Master Department",description:"",templateUrl:n+"app/pages/ctg/department/index.html",controller:"DepartmentController",controllerAs:"vm"}).when("/ctg/itfmpricing",{title:"ITFM Pricing List",description:"",templateUrl:n+"app/pages/ctg/itfmpricing/index.html",controller:"ItfmPricingController",controllerAs:"vm"}).when("/ctg/itfmexistinglist",{title:"ITFM Existing List",description:"",templateUrl:n+"app/pages/ctg/itfmexistinglist/index.html",controller:"ITFMExistingListController",controllerAs:"vm"}).when("/admin/user",{title:"Users Management",description:"",templateUrl:n+"app/pages/admin/user/index.html",controller:"UserController",controllerAs:"vm"}).when("/ctg/ithardware",{title:"IT Hardware",description:"",templateUrl:n+"app/pages/ctg/ithardware/index.html",controller:"ITHardwareController",controllerAs:"vm"}).when("/ctg/exchangerates",{title:"Master Exchange Rate",description:"",templateUrl:n+"app/pages/ctg/exchangerates/index.html",controller:"ExchangeRateController",controllerAs:"vm"}).when("/ctg/exchangerates/create",{title:"Master Exchange Rate",description:"",templateUrl:n+"app/pages/ctg/exchangerates/create.html",controller:"ExchangeRateController",controllerAs:"vm"}).when("/ctg/exchangerates/create",{title:"Master Exchange Rate",description:"",templateUrl:n+"app/pages/ctg/exchangerates/createGroups.html",controller:"ExchangeRateController",controllerAs:"vm"}).when("/ctg/exchangerates/edit/:id",{title:"Master Exchange Rate",description:"",templateUrl:n+"app/pages/ctg/exchangerates/edit.html",controller:"ExchangeRateController",controllerAs:"vm"}).when("/ctg/exchangerates/edit/:id",{title:"Master Exchange Rate",description:"",templateUrl:n+"app/pages/ctg/exchangerates/editGroups.html",controller:"ExchangeRateController",controllerAs:"vm"}).when("/ctg/planitfmreplacement",{title:"ITFM Replacement",description:"",templateUrl:n+"app/pages/ctg/planitfmreplacement/index.html",controller:"PlanITFMReplacementController",controllerAs:"vm"}).when("/ctg/assetclass",{title:"Asset Class",description:"",templateUrl:n+"app/pages/ctg/assetclass/index.html",controller:"AssetClassController",controllerAs:"vm"}).when("/ctg/asset",{title:"Asset Mangement",description:"",templateUrl:n+"app/pages/ctg/asset/index.html",controller:"AssetController",controllerAs:"vm"}).when("/ctg/costcenter",{title:"Cost Center",description:"",templateUrl:n+"app/pages/ctg/costcenter/index.html",controller:"CostCenterController",controllerAs:"vm"}).when("/admin/timeline",{title:"Timeline",description:"",templateUrl:n+"app/pages/admin/timeline/index.html",controller:"TimelineController",controllerAs:"vm"}).when("/home/menu",{title:"Menu management",description:"",templateUrl:n+"app/pages/home/menu/index.html",controller:"MenuController",controllerAs:"vm"}).when("/ctg/assetdepreciation",{title:"Asset Depreciation",description:"",templateUrl:n+"app/pages/ctg/departmenthead/index.html",controller:"AssetDepreciationController",controllerAs:"vm"}).otherwise({redirectTo:"/home"})}angular.module("BPT.routes",["ngRoute"]).config(e),e.$inject=["$routeProvider","$locationProvider"]}(),function(e){"use strict";var t=$("base").first().attr("href");e.__env=e.__env||{},e.__env.apiUrl="http://localhost:23557/",e.__env.baseUrl=t,e.__env.debug=!0}(this),function(e){"use strict";e.__env=e.__env||{},e.__env.apiUrl="http://production:9138/api/",e.__env.baseUrl="/",e.__env.debug=!1}(this),function(){"use strict";function e(e){return{getListYear:function(){return e.get("Common/GetListYear")},getListPlanType:function(){return e.get("Common/GetListPlanType")},getListCurrency:function(){return e.get("Common/GetListCurrency")},getCurrentRoleName:function(){return e.get("Common/GetCurrentRoleName")}}}angular.module("BPT").factory("commonService",e),e.$inject=["httpService"]}(),function(){"use strict";function e(l,i,s,a){var c={get:"get",post:"post",put:"put",delete:"delete"},d={success:200,badRequest:400,unProcessable:422,unauthorized:401,forbidden:403,notFound:404,notAcceptable:406,serverError:500,serviceUnavailable:503,conflict:409,notModified:304},u={success:"Successfully!",error:"Error !!",unKnown:"UnKnown Error !!",unchange:"- Nothing change",unauthorized:"- Unauthorized access page !!!"},m={addnew:"Add Information",update:"Update Information",delete:"Delete Action"};return{get:function(e){return r("get",e)},post:function(e,t,n){return r("post",e,t,n)},put:function(e,t,n){return r("put",e,t,n)},remove:function(e,t){return r("delete",e,t)},getNonLoading:function(e){return function(n,e,t,r){var o=i.defer();n=n.toLowerCase();var a=[s.baseUrl+e];n.match(/post|put/)&&a.push(t);return l[n].apply(null,a).then(function(e,t){p(n,e.status,r),o.resolve(e)},function(e,t){e.data&&e.data.ErrorMessage&&((r={message:{}}).message.error=e.data.ErrorMessage),p(n,e.status,r),o.reject("HTTP Error: "+t)}),o.promise}("get",e)}};function r(n,e,t,r){var o=i.defer();n=n.toLowerCase(),$(".loader").show();var a=[s.baseUrl+e];return n.match(/post|put/)&&a.push(t),l[n].apply(null,a).then(function(e,t){p(n,e.status,r),o.resolve(e),$(".loader").fadeOut(1)},function(e,t){e.data&&e.data.ErrorMessage&&((r={message:{}}).message.error=e.data.ErrorMessage),$(".loader").fadeOut(1),p(n,e.status,r),o.reject("HTTP Error: "+t)}),o.promise}function p(e,t,n){var r="{0} {1}",o=function(e,t){switch(e){case d.success:return t&&t.message&&t.message.success?t.message.success:u.success;case d.badRequest:case d.unProcessable:case d.notFound:case d.serverError:case d.serviceUnavailable:return t&&t.message&&t.message.error?t.message.error:u.error;case d.unauthorized:return t&&t.message&&t.message.unauthorized?t.message.unauthorized:u.unauthorized;default:return""}}(t,n);switch(e){case c.post:h(t,o=n&&n.message?o:a.formatStringWithParams(r,m.addnew,o));break;case c.put:h(t,o=n&&n.message?o:a.formatStringWithParams(r,m.update,o));break;case c.delete:h(t,o=n&&n.message?o:a.formatStringWithParams(r,m.delete,o))}}function h(e,t){switch(e){case d.success:toastr.success(t,"Success");break;case d.badRequest:case d.unProcessable:case d.notFound:case d.serverError:case d.serviceUnavailable:case d.unauthorized:toastr.warning(t,"Warning")}}}angular.module("BPT").factory("httpService",e),e.$inject=["$http","$q","env","utilitiesService"]}(),function(){"use strict";angular.module("BPT").constant("rateData",{Categories:[{value:"Personnel cost Growth rate",id:3},{value:"VA salary growth rate",id:2},{value:"Attrition rate",id:1}]})}(),function(){"use strict";angular.module("BPT").constant("RevenueData",{ServiceLines:[{value:"Application embedded software",text:"Application embedded software"},{value:"Application non-embedded software",text:"Application non-embedded software"},{value:"Application software development",text:"Application software development"},{value:"Application software domain dependent",text:"Application software domain dependent"},{value:"Business Services Processes",text:"Business Services Processes"},{value:"Design Services",text:"Design Services"},{value:"ERP Services",text:"ERP Services"},{value:"Non ERP",text:"Non ERP"},{value:"Testing & Validation",text:"Testing & Validatione"}],RBEIBusinessUnits:[{value:"BE1",text:"BE1"},{value:"BE2",text:"BE2"},{value:"BE3",text:"BE3"},{value:"BS",text:"BS"}],YesNoOption:[{value:!0,text:"Yes"},{value:!1,text:"No"}],WorkingSites:[{value:!0,text:"Onsite"},{value:!1,text:"Offshore"}],DirectTypes:[{value:"Direct",text:"Direct"},{value:"Direct-PE",text:"Direct-PE"},{value:"Indirect",text:"Indirect"}],Currencies:[{value:"USD",text:"USD"},{value:"EUR",text:"EUR"},{value:"JPY",text:"JPY"}],KeyRevenues:[{value:"Onsite",text:"Onsite"},{value:"Direct billing",text:"Direct billing"},{value:"Japan revenue",text:"Japan revenue"},{value:"Global customer",text:"Global customer"}]})}(),function(){"use strict";angular.module("BPT").constant("TravelData",{Purposes:[{value:"Business Project",text:"Business/Project"},{value:"Training",text:"Training"},{value:"Secondary Travel",text:"Secondary travel"},{value:"3rd Party Travel",text:"3rd party travel"},{value:"Recruitment",text:"Recruitment"}],VisaTypes:{WorkPermit:"Work Permit",BusinessVisa:"Business Visa",InlandTravel:"Inland travel"},AllowanceSubType:{Living:"Living",Lodging:"Lodging"},LevelRanges:{LowAssociateLevel:54,HightAssociateLevel:55}})}(),function(){"use strict";function e(){var a={get:"get",post:"post",put:"put",delete:"delete"},l={success:200,badRequest:400,unProcessable:422,unauthorized:401,forbidden:403,notFound:404,notAcceptable:406,serverError:500,serviceUnavailable:503,conflict:409,notModified:304},i={success:"Successfully!",error:"Error !!",unKnown:"UnKnown Error !!",unchange:"- Nothing change",unauthorized:"- Unauthorized access page !!!"},s={addnew:"Add Information",update:"Update Information",delete:"Delete Action"};return{formatStringWithParams:c,generateYears:function(){for(var e=[],t=(new Date).getFullYear()+2,n=t,r=t-5;r<=n;r++)e.push({value:r,text:r});return e},importExcel:function(t){var e=t.inputFile.split("\\").pop();t.scope.vm.importFileName=e,t.scope.vm.isUpdating=!0;var n=$("#ImportFile").prop("files")[0],r=new FormData;r.append("FileUpload",n),t.scope.$apply(),$(".loader").show(),$.ajax({type:"POST",url:t.url,data:r,dataType:"json",contentType:!1,processData:!1,success:function(e){toastr.info(e,"Info"),o("post",e.status,null),$(".loader").fadeOut(1),console.log(e),t.callback()},error:function(e){return toastr.info(e.message,"Info"),console.log(e),o("post",e.status,null),$(".loader").fadeOut(1),e}})},compareString:function(e,t){return!(!e||!t)&&e.toUpperCase()===t.toUpperCase()},defaultFormatNumber:function(e){return null==e||0==e?"":e<0?"("+(-1*e).toLocaleString("en-US")+")":e.toLocaleString("en-US")},getNumberFromString:function(e){var t=e.match(/[0-9]+/g);return null!=t?parseInt(t):0},importExcelAsync:function(e){var t=e.inputFile.split("\\").pop();e.scope.vm.importFileName=t,e.scope.vm.isUpdating=!0;var n=$("#"+e.id).prop("files")[0],r=new FormData;return r.append("FileUpload",n),e.scope.$apply(),$.ajax({type:"POST",url:e.url,data:r,dataType:"json",contentType:!1,processData:!1})}};function c(){for(var e=arguments[0],t=0;t<arguments.length-1;t++){var n=new RegExp("\\{"+t+"\\}","gm");e=e.replace(n,arguments[t+1])}return e}function o(e,t,n){var r="{0} {1}",o=function(e,t){switch(e){case l.success:return t&&t.message&&t.message.success?t.message.success:i.success;case l.badRequest:case l.unProcessable:case l.notFound:case l.serverError:case l.serviceUnavailable:return t&&t.message&&t.message.error?t.message.error:i.error;case l.unauthorized:return t&&t.message&&t.message.unauthorized?t.message.unauthorized:i.unauthorized;default:return""}}(t,n);switch(e){case a.post:d(t,o=n&&n.message?o:c(r,s.addnew,o));break;case a.put:d(t,o=n&&n.message?o:c(r,s.update,o));break;case a.delete:d(t,o=n&&n.message?o:c(r,s.delete,o))}}function d(e,t){switch(e){case l.success:toastr.success(t,"Success");break;case l.badRequest:case l.unProcessable:case l.notFound:case l.serverError:case l.serviceUnavailable:case l.unauthorized:toastr.warning(t,"Warning")}}}angular.module("BPT").factory("utilitiesService",e),e.$inject=[]}(),function(){"use strict";angular.module("BPT").directive("comment",["$parse","$q","commentService","authService","lodash","utilitiesService","$compile",function(e,h,s,c,l,d,t){var g,f=[],v=null,b=function(e){for(;f.length&&(!e||f.length>e);)f.pop().remove();0==f.length&&v&&v.remove()},C=function(e,t,n,r,o,a,l,i,s,c,d){var u=angular.isArray(o[1])||o[1]&&angular.isFunction(o[1].then)?o[1]:angular.isArray(o[2])||o[2]&&angular.isFunction(o[2].then)?o[2]:angular.isArray(o[3])||o[3]&&angular.isFunction(o[3].then)?o[3]:null,m="New Item";"function"==typeof o[0]||"string"==typeof o[0]||void 0!==o.text?m=function(e,t,n,r,o,a,l,i){var s=i("<a>");s.css("padding-right","8px"),s.css("color","white"),s.attr({tabindex:"-1",href:"#"}),"string"==typeof t[0]?n=t[0]:"function"==typeof t[0]?n=t[0].call(e,e,r,o):void 0!==t.text&&(n=t.text);var c=h.when(n);return a.push(c),c.then(function(e){l&&(s.css("cursor","default"),s.append(i('<strong style="font-family:monospace;font-weight:bold;float:right;">&gt;</strong>'))),s.append(e)}),s}(e,o,m,t,n,i,u,c):"function"==typeof o.html?m=o.html(e):void 0!==o.html&&(m=o.html),l.append(m),p(e,r,o,a,l,u,n,m,t,c,d)},p=function(n,e,t,r,o,a,l,i,s,c,d){if(e){var u=function(e){b(d+1);var t={pageX:s.pageX+r[0].offsetWidth-1,pageY:r[0].offsetTop+o[0].offsetTop-3,view:s.view||window};h.when(a).then(function(e){m(n,t,e,l,d+1)})};o.on("click",function(e){e.preventDefault(),n.$apply(function(){a?u():(c(s.currentTarget).removeClass("context"),b(),angular.isFunction(t[1])?t[1].call(n,n,s,l,i):t.click.call(n,n,s,l,i))})}),o.on("mouseover",function(e){n.$apply(function(){a&&u()})})}else o.on("click",function(e){e.preventDefault()}),o.addClass("disabled")},m=function(n,r,e,o,a,t){if(a||(a=0),!l)var l=angular.element;l(r.currentTarget).addClass("context"),g=r.currentTarget,L()&&(e[0][0]="Remove Comment"),H()&&(e[1][0]="Remove Spreadsheet");var i=l("<div>");v?i=v:(v=i).addClass("angular-bootstrap-contextmenu dropdown clearfix"),t&&i.addClass(t);var s=l("<ul>");s.addClass("dropdown-menu"),s.attr({role:"menu"}),s.css({display:"block",position:"absolute",left:r.pageX+"px",top:r.pageY+"px","z-index":1e4,"background-color":"#3C8DBC"});var c=[];angular.forEach(e,function(e){if(void 0!==e.enabled?e.enabled.call(n,n,r,o):"function"!=typeof e[2]||e[2].call(n,n,r,o)){var t=l("<li>");null===e?t.addClass("divider"):"object"==typeof e[0]||C(n,r,o,!0,e,s,t,c,0,l,a),s.append(t)}}),i.append(s);var d,u,m,p=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);i.css({width:"100%",height:p+"px",position:"absolute",top:0,left:0,zIndex:9999}),l(document).find("body").append(i),d=s,u=r,m=c,h.all(m).then(function(){var e=u.pageY,t=angular.element(d[0]).prop("offsetHeight"),n=u.view.innerHeight;t<e&&n-e<t?e=u.pageY-t:n<=t?(angular.element(d[0]).css({height:n-5,"overflow-y":"scroll"}),e=0):n-e<t&&(e<(l=5)&&(l=e),e=n-t-l);var r=u.pageX,o=angular.element(d[0]).prop("offsetWidth"),a=u.view.innerWidth;if(o<r&&a-r-5<o)r=a-o-5;else if(a-r<o){var l;r<5+(l=5)&&(l=r+5),r=a-o-l-5}d.css({display:"block",position:"absolute",left:r+"px",top:e+"px"})}),i.on("mousedown",function(e){l(e.target).hasClass("dropdown")&&(l(r.currentTarget).removeClass("context"),b())}).on("contextmenu",function(e){l(e.currentTarget).removeClass("context"),e.preventDefault(),b(a)}),n.$on("$destroy",function(){b()}),f.push(s)};function u(t){if(0==$(document).find("#popover-content-block").length){$(document).find("body").append('<div id="popover-content-block" class="hide"><div class="comment-content small"></div><h6 class="small"><a href="javascript:void(0)" class="view-full-comment">View Full Comment</a></h6></div>'),H()&&($(g).children("input").is(":visible")?$("#popover-content-block").append($('<h6 class="small"><a href="javascript:void(0)" class="edit-press-sheet">Edit Spreadsheet</a></h6>')):$("#popover-content-block").append($('<h6 class="small"><a href="javascript:void(0)" class="view-press-sheet">View Spreadsheet</a></h6>')))}O();var e=$("<a>");e.css("float","right"),e.attr("data-toggle","popover"),e.attr("data-trigger","manual"),e.attr("data-container","body"),e.attr("data-placement","right"),e.attr("data-html","true"),e.attr("title",'<h6 class="medium comment-meta"><a href="javascript:void(0)">'+$(g).attr("comment-user")+"</a> "+$(g).attr("comment-time")+"</h6>"),$(g).append(e),$("#popover-content-block").find(".comment-content").html($(g).attr("comment-content")),e.popover({html:!0,content:function(){return $("#popover-content-block").html()}}),w(),$(g).find("a").popover("show"),$(".popover-content").find(".view-full-comment").on("click",function(){$(g).find("a").popover("hide"),U()}),$(".popover-content").find(".view-press-sheet").on("click",function(){var e;$(g).find("a").popover("hide"),e='<div class="modal fade comment-modal" id="pressSheetModal" role="dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">&times;</button><h4 class="modal-title">Your Spreadsheet</h4></div><div class="modal-body">'+o(JSON.parse($(g).attr("press-sheet-content")))[0].outerHTML+'<div class="form-group"><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal" id="btn-close">Close</button></div></div></div></div></div></div>',$("#pressSheetModal").remove(),$(document).find("body").append(e),$("#pressSheetModal").modal()}),$(".popover-content").find(".edit-press-sheet").on("click",function(){$(g).find("a").popover("hide");var e=JSON.parse($(g).attr("press-sheet-content"));T(t,e)})}function o(e){var t=$('<table class="table table-striped table-hover table-bordered full-width-table table-press-sheet-hover"><thead><tr><th>Name</th><th>Value</th></tr></thead><tbody><tr class="summary"><td><strong><label>Summary</label></strong></td><td colspan="2"><strong><span class="summary-value"></span></strong></td></tr></tbody></table>');for(var n in e)if("Summary"!=n){var r=$("<tr>"),o=$("<td>");o.html(n),r.append(o);var a=$("<td>");a.html(d.defaultFormatNumber(e[n])),r.append(a),r.insertBefore(t.find(".summary"))}else $(t.find(".summary-value")).html(d.defaultFormatNumber(e[n]));return t}function y(e){if(0==$(document).find("#popover-press-sheet-block").length){$(document).find("body").append('<div id="popover-press-sheet-block" class="hide"><div class="press-sheet-content small">Table</div><h6 class="small"><a href="javascript:void(0)" class="edit-press-sheet">Edit Spreadsheet</a></h6></div>')}0==$(g).children("input").is(":visible")?$(".edit-press-sheet").hide():$(".edit-press-sheet").show(),O();var t=$("<a>");t.css("float","right"),t.attr("data-toggle","popover"),t.attr("data-trigger","manual"),t.attr("data-container","body"),t.attr("data-placement","right"),t.attr("data-html","true"),t.attr("title",'<h6 class="medium comment-meta"><a href="javascript:void(0)">'+$(g).attr("press-sheet-user")+"</a> "+$(g).attr("press-sheet-time")+"</h6>"),$(g).append(t);var n=JSON.parse($(g).attr("press-sheet-content")),r=o(n);$(".press-sheet-content").html(r),t.popover({html:!0,content:function(){return $("#popover-press-sheet-block").html()}}),w(),$(g).find("a").popover("show"),$(".popover-content").find(".edit-press-sheet").on("click",function(){$(g).find("a").popover("hide"),T(e,n)})}function a(e,t){var n=100<t.Content.length?t.Content.substring(0,100)+"...":t.Content;$(e).attr("comment-user",t.User.EmpName),$(e).attr("comment-time",t.ShortAddedDateString),$(e).attr("comment-content",n),$(e).addClass("note")}function i(e,t,n,r){if($(e).addClass("press-sheet"),$(e).attr("press-sheet-id",n.Id),$(e).attr("press-sheet-user",n.User.EmpName),$(e).attr("press-sheet-time",n.ShortAddedDateString),$(e).attr("press-sheet-content",n.Content),null!=t){var o=$(g).children("input:last");if(0<o.length){var a=o.attr("ng-model");null!=a&&(o.val(r),t.$eval(a+"="+r))}}}function w(){$("[data-toggle=popover]").popover("hide")}function U(){$(document).find("body").append('<div class="modal fade comment-modal" id="commentModal" role="dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">&times;</button><h4 class="modal-title">Your Comment</h4></div><div class="modal-body"><script>var CKEDITOR_BASEPATH = "/Scripts/ckeditor/";CKEDITOR.replace("commentText");<\/script><form novalidate><div class="form-group"><textarea rows="5" name="commentText" id="commentText" class="editable-input form-control input-sm" required style="width:570px;"/></div><div class="form-group"><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal" id="btn-close">Close</button><button type="button" class="btn btn-primary" data-dismiss="modal" id="btn-add">Add</button><button type="button" class="btn btn-primary" data-dismiss="modal" id="btn-update">Update</button></div></div><div class="form-group comment-block"></div></form></div></div></div></div></div>'),$(".comment-modal").on("hidden.bs.modal",function(){$(document).find("#commentModal").remove()}),$("#btn-add").on("click",function(){var e,t;e=I(),t={UserId:c.currentUser.UserId,UniqueKey:S(),Content:CKEDITOR.instances.commentText.getData(),AddedDate:new Date,AddedByUserId:c.currentUser.UserId,UpdatedDate:new Date,UpdatedUserId:c.currentUser.UserId,IsActive:!0,IsPressSheet:!1},s.addOrUpdateComment(e,t).then(function(){P(e,t.UniqueKey)})}),$("#btn-update").on("click",function(){var e,t,n,r=parseInt($("#commentText").attr("comment-id"));e=r,t=I(),n={Id:e,UserId:c.currentUser.UserId,UniqueKey:S(),Content:CKEDITOR.instances.commentText.getData(),UpdatedDate:new Date,UpdatedUserId:c.currentUser.UserId},s.addOrUpdateComment(t,n).then(function(){P(t,n.UniqueKey)})}),x(),$("#btn-update").hide(),$("#commentText").val(""),$("#commentModal").modal()}function T(l,e){if($("#pressSheetModal").remove(),$(document).find("body").append('<div class="modal fade comment-modal" id="pressSheetModal" role="dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal">&times;</button><h4 class="modal-title">Your Spreadsheet</h4></div><div class="modal-body"><form novalidate><div class="form-group"><table class="table table-striped table-hover table-bordered full-width-table table-press-sheet"><thead><tr><th>Name</th><th>Value</th><th>Action</th></tr></thead><tbody><tr><td><input class="form-control" type="text" /></td><td><input class="form-control col-value" type="number" /></td><td><button type="button" title="Remove row" disabled class="btn btn-primary btn-remove"><span class="glyphicon glyphicon-minus"></span></button></td></tr><tr class="summary"><td><strong><label>Summary</label></strong></td><td colspan="2"><strong><span class="summary-value"></span></strong></td></tr></tbody></table><div class="form-group"><button type= "button" title="Add row" class="btn btn-warning" id="btn-add-row"><span class="glyphicon glyphicon-plus"></span></button></div></div><div class="form-group"><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal" id="btn-close">Close</button><button type="button" class="btn btn-primary" data-dismiss="modal" id="btn-add-press-sheet">Add</button><button type="button" class="btn btn-primary" data-dismiss="modal" id="btn-update-press-sheet">Update</button></div></div></form></div></div></div></div></div>'),null!=e){for(var t in e)if("Summary"!=t){var n=$(".table-press-sheet").find("tbody").children("tr").not(".summary").last()[0],r=$(n).clone().insertAfter(n);r.find("input:first").val(t),r.find("input:last").val(e[t]),r.find("button").removeAttr("disabled")}else $(".summary-value").html(d.defaultFormatNumber(e[t]));$(".table-press-sheet").find("tbody").children("tr").first().remove(),1==$(".table-press-sheet").find("tbody").children("tr").not(".summary").length&&$(".table-press-sheet").find("button").attr("disabled",!0),$("#btn-add-press-sheet").hide(),$("#btn-update-press-sheet").show()}else $("#btn-update-press-sheet").hide(),$("#btn-add-press-sheet").show;function o(){$(".summary-value").text(d.defaultFormatNumber(A()))}function i(){for(var e={},t=$(".table-press-sheet").find("tbody").children("tr").not(".summary"),n=0;n<t.length;n++){var r=t[n],o=$(r).find("input:first").val(),a=$(r).find("input:last").val();""!=o&&""!=a&&(e[o]=parseFloat(a))}return e.Summary=A(),JSON.stringify(e)}$("#pressSheetModal").on("hidden.bs.modal",function(){$(this).remove()}),$("#btn-add-row").on("click",function(){var e=$(".table-press-sheet").find("tbody").children("tr").not(".summary").last()[0];$(e).clone().insertAfter(e).find("input").val(""),$(".table-press-sheet").find("button").removeAttr("disabled")}),$(".table-press-sheet").delegate(".btn-remove","click",function(){$(this).parents("tr").remove(),o(),1==$(".table-press-sheet").find("tbody").children("tr").not(".summary").length&&$(".table-press-sheet").find("button").attr("disabled",!0)}),$(".table-press-sheet").delegate(".col-value","keyup click",function(){o()}),$("#btn-add-press-sheet").on("click",function(){var e,t,n,r;e=l,t=i(),n=I(),r={UserId:c.currentUser.UserId,UniqueKey:S(),Content:t,AddedDate:new Date,AddedByUserId:c.currentUser.UserId,UpdatedDate:new Date,UpdatedUserId:c.currentUser.UserId,IsActive:!0,IsPressSheet:!0},s.addOrUpdateComment(n,r).then(function(){F(e,n,r.UniqueKey)})}),$("#btn-update-press-sheet").on("click",function(){var e,t,n,r,o,a=parseInt($(g).attr("press-sheet-id"));e=l,t=a,n=i(),r=I(),o={Id:t,UserId:c.currentUser.UserId,UniqueKey:S(),Content:n,UpdatedDate:new Date,UpdatedUserId:c.currentUser.UserId},s.addOrUpdateComment(r,o).then(function(){F(e,r,o.UniqueKey)})}),$("#pressSheetModal").modal()}function A(e){if(null==e){var t=0;return $(".table-press-sheet").find(".col-value").each(function(){var e=parseFloat($(this).val());isNaN(e)||(t+=e)}),t}return JSON.parse(e).Summary}function x(){$(".comment-block").empty();var e=D();if(e){var t=l.filter(e.Comments,{IsPressSheet:!1,IsActive:!0});l.forEach(t,function(e){$(".comment-block").append('<div class="comment mb-2 row" comment-user-id="'+e.User.Id+'" comment-id="'+e.Id+'">\t<div class="comment-avatar col-md-2 col-sm-2 text-center pr-1">\t\t<img class="mx-auto rounded-circle img-fluid" src="https://rb-owa.apac.bosch.com/ews/exchange.asmx/s/GetUserPhoto?email='+e.User.Email+'&amp;size=HR120x120"alt="">\t</div>\t<div class="comment-content col-md-9 col-sm-10">\t\t<h6 class="small comment-meta"><a href="javascript:void(0)">'+e.User.EmpName+"</a> "+e.ShortAddedDateString+'</h6>\t\t<div class="comment-body">\t\t\t<p>'+e.Content+"</p>\t\t</div>\t</div></div>")}),$(".comment").hover(n,r)}$(".comment-block").scrollTop(5e3)}function n(e){var t=D();if(null!=t){var n=t.Comments,r=e.currentTarget;$(r).css({"background-color":"#ECF0F5"}),$(r).attr("comment-user-id")==c.currentUser.UserId.toString()&&($(r).append('<div class="comment-bar"><i class="glyphicon glyphicon-pencil pointer edit-comment" aria-hidden="true"></i>&nbsp;<i class="glyphicon glyphicon-trash pointer remove-comment" aria-hidden="true"></i></div>'),$(".edit-comment").on("click",function(e){var t=l.find(n,{Id:parseInt($(e.currentTarget).closest(".comment").attr("comment-id"))});CKEDITOR.instances.commentText.setData(t.Content),$("#commentText").attr("comment-id",t.Id),$("#btn-add").hide(),$("#btn-update").show()}),$(".remove-comment").on("click",function(e){var t='<div class="modal fade" id="deleteComment" role="dialog" aria-labelledby="myModalLabel" comment-id="'+parseInt($(e.currentTarget).closest(".comment").attr("comment-id"))+'" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header">Confirm delete comment</div><div class="modal-body"><p>Are you sure you want to delete this comment?</p></div><div class="modal-footer"><a id="bt-modal-cancel" href="#" class="btn btn-default" data-dismiss="modal">Cancel</a><a id="bt-modal-confirm" class="btn btn-danger btn-ok btn-delete-comment" data-dismiss="modal">Delete</a></div></div></div></div>';$(document).find("body").append(t),$("#deleteComment").on("hidden.bs.modal",function(){$(document).find("#deleteComment").remove()}),$(".btn-delete-comment").on("click",function(){var o=parseInt($("#deleteComment").attr("comment-id"));s.removeComment(o).then(function(e){if(e){var t=D(),n=l.find(t.Comments,{Id:o}),r=t.Comments.indexOf(n);t.Comments.splice(r,1),x(),P(t.PartitionKey,t.UniqueKey)}})}),$("#deleteComment").modal()}))}}function r(e){var t=e.currentTarget;$(t).css({"background-color":"white"}),$(t).find(".comment-bar").remove()}function I(){return $(g).closest("table").attr("binding-partition-key")}function S(){return $(g).attr("binding-unique-key")}function D(){var e=I(),t=S();return l.find(s.commentThreads[e],{UniqueKey:t})}function P(t,n){s.getCommentThreads(t).then(function(){var e=k(t,n);null!=e&&a(g,e)})}function F(n,r,o){s.getCommentThreads(r).then(function(){var e=M(r,o);if(null!=e){var t=A(e.Content);i(g,n,e,t)}})}function k(e,t){var n=l.find(s.commentThreads[e],{UniqueKey:t});if(null!=n&&null!=n.Comments&&0<n.Comments.length){var r=l.filter(n.Comments,{IsPressSheet:!1,IsActive:!0});if(null!=r&&0<r.length)return r[r.length-1]}return null}function R(e,t,n){if(null!=s.commentThreads[t]){var r=k(t,n);null!=r&&a(e,r)}}function M(e,t){var n=l.find(s.commentThreads[e],{UniqueKey:t});if(null!=n&&null!=n.Comments&&0<n.Comments.length){var r=l.filter(n.Comments,{IsPressSheet:!0,IsActive:!0});if(null!=r&&0<r.length)return r[r.length-1]}return null}function B(e,t,n){if(null!=s.commentThreads[t]){var r=M(t,n);null!=r&&i(e,null,r)}}function N(e){var t,n,r;L()?(t=e,n=I(),r=S(),s.removeCommentThread(n,r).then(function(e){e&&s.getCommentThreads(n).then(function(){$(t.currentTarget).removeClass("note"),$(t.currentTarget).removeAttr("comment-text");var e=$(t.currentTarget).find("a");e.popover("destroy"),e.remove()})})):U()}function E(e,t){var o,a;H()?(o=t,a=parseInt($(g).attr("press-sheet-id")),s.removeComment(a).then(function(e){if(e){var t=D(),n=l.find(t.Comments,{Id:a}),r=t.Comments.indexOf(n);t.Comments.splice(r,1),$(o.currentTarget).removeClass("press-sheet"),F(null,t.PartitionKey,t.UniqueKey)}})):T(e,null)}function L(){return $(g).hasClass("note")}function H(){return $(g).hasClass("press-sheet")}function O(){$(g).find('a[data-toggle="popover"]').remove()}function j(e){if(!t)var t=angular.element;var n=t(g).attr("original-color"),r=t(g).attr("original-width");t(g).css({"border-color":n,"border-width":r}),t(g).removeAttr("original-color"),t(g).removeAttr("original-width"),L()&&$("#popover-content-block").remove(),H()&&$("#popover-press-sheet-block").remove()}function Y(e){w(),U()}return function(o,e,a){var t=$(e).closest("table"),n=t.attr("partition-key"),r=null;try{if(void 0===n)throw"Missing partition key on table";r=o.$eval(n)}catch(e){r=n}finally{t.attr("binding-partition-key",r||0)}var l=null;try{l=o.$eval(a.uniqueKey)}catch(e){l=a.uniqueKey}finally{$(e).attr("binding-unique-key",l||0)}void 0===s.commentThreads[r]?(s.commentThreads[r]=[],s.getCommentThreads(r).then(function(e){var t;t=$("table").find("td[comment]"),angular.forEach(t,function(e){var t=$(e).closest("table").attr("binding-partition-key"),n=$(e).attr("binding-unique-key");R(e,t,n),B(e,t,n)})})):(R(e,r,l),B(e,r,l)),$("body").off("click").on("click",function(){w()}),0<r.search("budget").length?e.hover(function(e){!function(e,t){if(!n)var n=angular.element;w(),g=e.currentTarget,n(g).attr("original-color",n(g).css("border-right-color")),n(g).attr("original-width",n(g).css("border-right-width")),n(g).css({"border-top-color":"#FF0000","border-right-color":"#FF0000","border-bottom-color":"#FF0000","border-left-color":"#FF0000","border-top-width":"2px","border-right-width":"2px","border-bottom-width":"2px","border-left-width":"2px"}),L()?u(t):H()&&y(t)}(e,o)},K):e.hover(function(e){!function(e,t){if(!n)var n=angular.element;w(),n(g=e.currentTarget).attr("original-color",n(g).css("border-color")),n(g).attr("original-width",n(g).css("border-width")),n(g).css({"border-color":"#FF0000","border-width":"2px"}),L()?u(t):H()&&y(t)}(e,o)},j),e.on("dblclick",Y);var i="contextmenu";a.contextMenuOn&&"string"==typeof a.contextMenuOn&&(i=a.contextMenuOn),e.on(i,function(r){if(w(),r.stopPropagation(),r.preventDefault(),("ontouchstart"in window||navigator.maxTouchPoints)&&"true"===e.attr("draggable"))return!1;o.$apply(function(){var e=[["Add Comment",function(e,t,n){N(t)}],["Add Spreadsheet",function(e,t,n){E(e,t)},function(){return $(g).children("input").is(":visible")}]],t=a.contextMenuClass,n=null;try{n=o.$eval(a.uniqueKey)}catch(e){n=a.uniqueKey}if(!(e instanceof Array))throw'"'+a.uniqueKey+'" not an array';0!==e.length&&m(o,r,e,n,void 0,t)})})};function K(e){if(!t)var t=angular.element;var n=t(g).attr("original-color"),r=t(g).attr("original-width");t(g).css({"border-top-color":"transparent","border-right-color":n,"border-bottom-color":"transparent","border-left-color":n,"border-top-width":r,"border-right-width":r,"border-bottom-width":r,"border-left-width":r}),t(g).removeAttr("original-color"),t(g).removeAttr("original-width")}}])}(),function(){"use strict";angular.module("BPT").directive("enterAction",function(){return function(t,e,n){e.bind("keydown keypress",function(e){13===e.which&&(t.$apply(function(){t.$eval(n.enterAction)}),e.preventDefault())})}})}(),function(){function e(){return{restrict:"A",priority:-1,require:"ngForm",controller:t}}function t(e,t,n,r){var o,a=this,l=(r.controller("form"),[]),i=[];function s(t,e){return _.find(e,function(e){return e.row===t})}function c(e,t){var n=s(e,l);return n&&-1!==n.cells.indexOf(t)}function d(){l=[],h(!(i=[]))}function u(e,t,n){p(e,t,n,l)}function m(e,t,n){p(e,t,n,i),h(0<i.length)}function p(e,t,n,r){var o=s(e,r);(o||n)&&(n?(o||(o={row:e,cells:[]},r.push(o)),-1===o.cells.indexOf(t)&&o.cells.push(t)):(_.remove(o.cells,function(e){return t===e}),0===o.cells.length&&_.remove(r,function(e){return o===e})))}function h(e){a.$invalid=e,a.$valid=!e}function g(t){_.remove(i,function(e){return e.row===t}),_.remove(l,function(e){return e.row===t}),h(0<i.length)}(o=t(n.trackedTable).assign)(e,a),e.$on("$destroy",function(){o(null)}),a.reset=d,a.isCellDirty=c,a.setCellDirty=u,a.setCellInvalid=m,a.untrack=g}angular.module("BPT").directive("trackedTable",e),e.$inject=[],t.$inject=["$scope","$parse","$attrs","$element"]}(),function(){function e(){return{restrict:"A",priority:-1,require:["^trackedTable","ngForm"],controller:t}}function t(e,t,n,r){var o=n(e.trackedTableRow)(r),a=(t.controller("form"),t.controller("trackedTable"));this.isCellDirty=function(e){return a.isCellDirty(o,e)},this.setCellDirty=function(e,t){a.setCellDirty(o,e,t)},this.setCellInvalid=function(e,t){a.setCellInvalid(o,e,t)}}angular.module("BPT").directive("trackedTableRow",e),e.$inject=[],t.$inject=["$attrs","$element","$parse","$scope"]}(),function(){function e(){return{restrict:"A",priority:-1,scope:!0,require:["^trackedTableRow","ngForm"],controller:t}}function t(e,t,n){var r=t.controller("form"),o=r.$name,a=t.controller("trackedTableRow");a.isCellDirty(o)?r.$setDirty():r.$setPristine(),n.$watch(function(){return r.$dirty},function(e,t){e!==t&&a.setCellDirty(o,e)}),n.$watch(function(){return r.$invalid},function(e,t){e!==t&&a.setCellInvalid(o,e)})}angular.module("BPT").directive("trackedTableCell",e),e.$inject=[],t.$inject=["$attrs","$element","$scope"]}(),function(){"use strict";function e(o){return{restrict:"E",transclude:!0,scope:{show:"=",timeout:"@"},link:function(n,r){r.hide(),n.$watch("show",function(e,t){t!==e&&!0===e&&(r.show(),o(function(){r.hide(),n.show=!1},n.timeout))})},templateUrl:"/shared/directives/warning-message/partials/message.html"}}angular.module("BPT").directive("warningMessage",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(t,n,e,r){var o={NTID:null,UserId:null,UserName:null,Email:null,RoleId:null,RoleName:null,AddedDateFormated:null,DepartmentId:null,Accessables:null};function a(){var n=r.defer();return t.get("Common/GetCurrentUser").then(function(e){var t;t=e.data,Object.assign(o,t),n.resolve()}),n.promise}function l(t){return!!o.Accessables&&-1<n.findIndex(o.Accessables,function(e){return e.toLowerCase()=="#"+t.toLowerCase()})}function i(e){return-1<n.findIndex(e,function(e){return e.toUpperCase()==o.RoleName.toUpperCase()})}return{authenticate:a,currentUser:o,canAccessPage:function(t){var n=r.defer();if(null==o.NTID)a().then(function(){var e=l(t);n.resolve(e)});else{var e=l(t);n.resolve(e)}return n.promise},isInRoles:function(t){var n=r.defer();if(null==o.NTID)a().then(function(){if(t){var e=i(t);n.resolve(e)}else n.resolve(!1)});else{var e=i(t);n.resolve(e)}return n.promise},switchRole:function(e){return t.put("Common/SwitchRole",{role:e})},canSwitchRole:function(){return t.get("Common/CanSwitchRole")}}}angular.module("BPT").factory("authService",e),e.$inject=["httpService","lodash","$rootScope","$q"]}(),function(){"use strict";function e(o,e,t,a){var r={};return{getCommentThreads:function(t){var n=a.defer();return o.get("Common/GetComments/?partitionKey="+t).then(function(e){r[t]=e.data,n.resolve(e.data)}),n.promise},commentThreads:r,addOrUpdateComment:function(e,t){var n=a.defer();return o.post("Common/AddOrUpdateComment/?partitionKey="+e,t).then(function(e){n.resolve(e.data)}),n.promise},removeCommentThread:function(e,t){var n=a.defer(),r=t.replace(/&/g,"[and]");return o.remove("Common/RemoveCommentThread/?partitionKey="+e+"&uniqueKey="+r).then(function(e){n.resolve(e.data)}),n.promise},removeComment:function(e){var t=a.defer();return o.remove("Common/RemoveComment/?commentId="+e).then(function(e){t.resolve(e.data)}),t.promise}}}angular.module("BPT").factory("commentService",e),e.$inject=["httpService","lodash","$rootScope","$q"]}(),function(){"use strict";function e(r){return{gethomepage:function(){return r.get("home/GetHomepageView")},getProcessDetail:function(e,t,n){return r.get("Home/GetProcessDetail/?pageUrl="+e+"&timelineId="+t+"&fundCenterId="+n)},checkIsMyTask:function(e,t){return r.get("Home/CheckIsMyTask/?pageUrl="+e+"&roleName="+t)},submitData:function(e,t,n){return r.post("Home/SubmitData/?pageUrl="+e+"&timelineId="+t+"&fundCenterId="+n)},rejectData:function(e,t,n){return r.post("Home/RejectData/?pageUrl="+e+"&timelineId="+t+"&fundCenterId="+n)},confirmData:function(e,t,n){return r.post("Home/confirmData/?pageUrl="+e+"&timelineId="+t+"&fundCenterIds="+n)},approveData:function(e,t,n){return r.post("Home/approveData/?pageUrls="+e+"&timelineId="+t+"&fundCenterIds="+n)},submitListPendingTask:function(e){return r.post("Home/SubmitListPendingTask/?timelineId="+e)}}}angular.module("BPT").factory("homeService",e),e.$inject=["httpService"]}(),function(){"use strict";function e(e){return{getMenus:function(){return e.get("menu/GetAllMenusByCurrentRole")},getAllMenu:function(){return e.get("menu/GetAll")}}}angular.module("BPT").factory("menuService",e),e.$inject=["httpService"]}(),function(){"use strict";var e=$("base").first().attr("href");function t(){this.$onInit=function(){}}angular.module("BPT.components").component("footerComponent",{controller:t,controllerAs:"vm",templateUrl:e+"app/components/footer/footer.tpl.html"}),t.$inject=[]}(),function(){"use strict";var s=$("base").first().attr("href");function e(e,t,n,r,o,a){var l=this;n.currentUser=r.currentUser,r.$on("authenticated",function(){n.currentUser=t.currentUser}),t.canSwitchRole().then(function(e){l.canSwitchRole=e.data}),l.switchRole=function(e){t.switchRole(e).then(function(){o.location.reload(!0)})},l.$onInit=function(){r.$on("revenueChange",function(e,t){t.selectedTimeLine&&t.selectedYear&&t.selectedFundCenter?a.getHeaderInfo(t.selectedYear,t.selectedFundCenter,t.selectedTimeLine).then(function(e){l.headerdata={headerRevenue:e.data.statistic.TotalCurrencyRevenue,headerDE:e.data.statistic.PercentDE,headerDB:e.data.statistic.TotalCurrencyRevenueDirectPercent}}):l.headerdata=null}),e.getMenus().then(function(e){$.each(e.data,function(e,t){var n=null!==t.URL?t.URL.toLowerCase():"",r=$("<span>").attr("class","hidden-xs").html(t.MenuName),o=$("<a>").attr({class:"dropdown notifications-menu",href:s+n}).append(r),a=$("<ul>").attr("class","dropdown-menu multi-level").attr("role","menu").attr("aria-labelledby","dropdownMenu"),l=$("<li>").attr("class","dropdown notifications-menu").append(o).append(a);$("ul#menuBPT").append(l),function l(e,i){$.each(e,function(e,t){var n=null!==t.URL?t.URL.toLowerCase():t.URL,r=$("<a>").attr("href",s+n).html(t.MenuName),o=$("<ul>").attr("class","dropdown-menu"),a=$("<li>").append(r).append(o);null!==t.ChildMenus&&0<t.ChildMenus.length&&a.attr("class","dropdown-submenu"),$(i).append(a),null!==t.ChildMenus&&0<t.ChildMenus.length&&l(t.ChildMenus,o)})}(t.ChildMenus,a)})}),roleService.getRoles().then(function(e){l.roles=e.data})}}angular.module("BPT.components").component("headerComponent",{controller:e,controllerAs:"vm",templateUrl:s+"app/components/header/header.tpl.html"}),e.$inject=["menuService","authService","$scope","$rootScope","$window","revenueService"]}(),function(){"use strict";var e=$("base").first().attr("href");function t(r,o,e,t,a,l,n,i,s,c,d,u,m,p,h){var g=this,f=d.path(),v=["/gm/capacitynrecruitment","/gm/itfmcost","/gm/travel","/gm/revenue","/gm/vkmsheet","/gm/vkmbudget","/gm/budgetbooking"],b={};function C(r,e,t){s.getProcessDetail(r,e,t).then(function(e){var t,n;b=e.data,t=r,n=g.roleName,s.checkIsMyTask(t,n).then(function(e){g.isMyTask=e.data,g.status=null!==b&&""!==b?b.Status:"Pending",g.isEditable="Open"===g.timeline.Status&&g.isMyTask&&("Pending"===g.status||"Rejected"===g.status)||"CTG"===g.roleName,g.isActivePage=!0,o.$emit("dataChange",{selectedYear:g.selectedYear,selectedTimeLine:g.timeline.Id,selectedFundCenter:g.seletedDepartment.FundId,selectedFundCenterName:g.seletedDepartment.FundCode,isEditable:g.isEditable,listTimeline:g.listTimeline,fundcenters:g.lstfundCenters,functions:g.departments,actualMonth:g.actualMonth}),h.$emit("revenueChange",{selectedYear:g.selectedYear,selectedTimeLine:g.timeline.Id,selectedFundCenter:g.seletedDepartment.FundId,selectedFundCenterName:g.seletedDepartment.FundCode,isEditable:g.isEditable,listTimeline:g.listTimeline,fundcenters:g.lstfundCenters}),g.selectedYear&&o.$emit("changeFilter",{selectedYear:g.selectedYear})})})}function y(){void 0!==$("#planbarSection").val()&&g.seletedDepartment&&void 0!==g.seletedDepartment.FundId&&null!==g.seletedDepartment.FundId?t.getHeadCountCapacity(g.seletedDepartment.FundId,g.timeline.Id).then(function(e){$("#headerHC").text("Headcount: "+e.data.headCount).show()}):$("#headerHC").hide(),null!==g.timeline&&""!==g.timeline&&void 0!==g.timeline||(g.timeline={},g.timeline.Id=-1),m.put("vm.timeline",JSON.stringify(g.timeline)),null!==g.timeline&&""!==g.timeline&&void 0!==g.timeline&&null!==g.seletedDepartment&&""!==g.seletedDepartment&&void 0!==g.seletedDepartment&&($(".loader").fadeIn(1),g.showStatus=!0,m.put("vm.seletedDepartment",JSON.stringify(g.seletedDepartment)),C(f,g.timeline.Id,g.seletedDepartment.FundId))}function w(){if(void 0!==m.get("vm.seletedDepartment")){var e=JSON.parse(m.get("vm.seletedDepartment"));$(g.departments).each(function(){this.FundId===e.FundId&&(g.seletedDepartment=e)})}y()}function U(n){g.seletedDepartment=void 0,0<=r.location.href.indexOf("dh")?l.getBudgetOwnersByNTID(g.currentUser.NTID,g.timeline.Id).then(function(e){g.departments=e.data,g.departments.push({FundId:-1,FundCode:"-----",ParentID:-1}),g.departments=g.departments.filter(function(e){return e.ParentID===n}),w()}):a.getAllFundCenters(g.timeline.Id).then(function(e){g.departments=[],g.lstfundCenters=[];var t=p.orderBy(e.data,["FundCenterCode"],["asc"]);(0<=r.location.href.indexOf("gm")||0<=r.location.href.indexOf("ctg"))&&g.departments.push({FundId:-1,FundCode:"-----",ParentID:-1}),$(t).each(function(){g.departments.push({FundId:this.FundCenterID,FundCode:this.FundCenterCode,ParentID:this.ParentID}),g.lstfundCenters.push({FundId:this.FundCenterID,FundCode:this.FundCenterCode,ParentID:this.ParentID})}),g.departments=g.departments.filter(function(e){return e.ParentID===n}),w()})}function T(e){var t=u.defer();return n.getTimelines(e).then(function(e){t.resolve(e.data)}),t.promise}function A(e){g.fundCenterParents=[],g.departments=[],a.getAllFundCenterParents(e).then(function(e){switch(g.fundCenterParents=e.data,$(g.fundCenterParents).each(function(){this.FundId=this.FundCenterID,this.FundCode=this.FundCenterCode}),"HRL"===g.roleName&&(g.fundCenterParents=g.fundCenterParents.filter(function(e){return"HRL"===e.FundCenterCode})),g.roleName){case"HRL":g.fundCenterParents=g.fundCenterParents.filter(function(e){return"HRL"===e.FundCenterCode});break;case"CTG":g.fundCenterParents.push({FundId:-1,FundCode:"Total RBVH",ParentID:0})}!function(){if(void 0!==m.get("vm.seletedFundCenterParent")){var e=JSON.parse(m.get("vm.seletedFundCenterParent"));$(g.fundCenterParents).each(function(){this.FundId===e.FundId&&(g.seletedFundCenterParent=e)})}}(),null!=g.seletedFundCenterParent?U(g.seletedFundCenterParent.FundId):U(-1)})}g.isDashboard=!1,g.loadtime=function(e){return m.put("vm.selectedYear",e),o.$emit("changeFilter",{selectedYear:g.selectedYear}),u.all([T(e)]).then(function(e){g.listTimeline=e[0],A(-1),y()})},g.changeFilter=y,g.$onInit=function(){var t,n;console.log(f),0<f.indexOf("dashboard")&&(g.isDashboard=!0),setTimeout(function(){g.isDashboard&&($("#actualTerm").datepicker({format:"mm/yyyy",startView:"year",minViewMode:"months"}),$("#actualTerm").datepicker("setDate","now"))},1e3),g.currentUser=currenrUser,g.departments=[],g.selectedYear=(new Date).getFullYear(),g.lstfundCenters=[],void 0!==m.get("vm.selectedYear")&&(g.selectedYear=m.get("vm.selectedYear"),o.$emit("changeFilter",{selectedYear:g.selectedYear})),u.all([(n=u.defer(),i.getListYear().then(function(e){n.resolve(e.data)}),n.promise),T(g.selectedYear),(t=u.defer(),i.getCurrentRoleName().then(function(e){t.resolve(e.data)}),t.promise)]).then(function(e){g.listYear=e[0],g.listTimeline=e[1],g.roleName=e[2],g.canReject="CTG"===g.roleName||"GM"===g.roleName,void 0!==m.get("vm.timeline")&&(g.timeline=JSON.parse(m.get("vm.timeline")),A(g.timeline.Id))}),g.isOnlyShowFilter="true"===g.onlyShowFilter},g.submitData=function(){s.submitData(f,g.timeline.Id,g.seletedDepartment.FundId).then(function(e){e.data,y()})},g.rejectData=function(){s.rejectData(f,g.timeline.Id,g.seletedDepartment.FundId).then(function(e){e.data,y()})},g.confirmData=function(){s.confirmData(f,g.timeline.Id,[g.seletedDepartment.FundId]).then(function(e){e&&y()})},g.confirmAllData=function(){var e=[];$(g.departments).each(function(){0<this.FundId&&e.push(this.FundId)}),s.confirmData(f,g.timeline.Id,e).then(function(e){e&&y()})},g.approveData=function(){0<=v.indexOf(f)&&s.approveData(v,g.timeline.Id,[g.seletedDepartment.FundId]).then(function(e){e&&y()})},g.approveAllData=function(){var e=[];$(g.departments).each(function(){0<this.FundId&&e.push(this.FundId)}),0<=v.indexOf(f)&&s.approveData(v,g.timeline.Id,e).then(function(e){e&&y()})},g.getDepartments=U,g.getFundCenterParents=function(e){null!=e&&(g.fundCenterParents=[],a.getAllFundCenterParents(e).then(function(e){switch(g.fundCenterParents=e.data,$(g.fundCenterParents).each(function(){this.FundId=this.FundCenterID,this.FundCode=this.FundCenterCode}),g.roleName){case"HRL":g.fundCenterParents=g.fundCenterParents.filter(function(e){return"HRL"===e.FundCenterCode});break;case"CTG":g.fundCenterParents.push({FundId:-1,FundCode:"Total RBVH",ParentID:0})}}))},g.setCookieSelectedTimeline=function(){m.put("vm.timeline",JSON.stringify(g.timeline))},g.setCookieSeletedFundCenterParent=function(){m.put("vm.seletedFundCenterParent",JSON.stringify(g.seletedFundCenterParent))},g.setCookieSeletedFunction=function(){m.put("vm.seletedDepartment",JSON.stringify(g.seletedDepartment))}}angular.module("BPT.components").component("planbarComponent",{controller:t,controllerAs:"vm",templateUrl:e+"app/components/planbar/planbar.tpl.html",bindings:{onlyShowFilter:"@"}}),t.$inject=["$window","$scope","revenueService","capacitynrecruitmentService","fundCenterService","budgetOwnerService","timelineService","commonService","homeService","utilitiesService","$location","$q","$cookies","lodash","$rootScope"]}(),function(){"use strict";var e=$("base").first().attr("href");function t(n,e,r,l,t,i,s){var c=this;c.timeline={};var d=t.path(),u={};function m(e){var t=i.defer();return n.getTimelines(e).then(function(e){t.resolve(e.data)}),t.promise}function o(){var e,t,n,r,o,a;null!==c.timeline&&""!==c.timeline||(c.timeline={},c.timeline.Id=-1),console.log("vm.timeline.Id: "+c.timeline.Id),s.put("vm.timeline",JSON.stringify(c.timeline)),i.all([(r=d,o=c.timeline.Id,a=i.defer(),l.getProcessDetail(r,o).then(function(e){a.resolve(e.data)}),a.promise),(e=d,t=c.roleName,n=i.defer(),l.checkIsMyTask(e,t).then(function(e){n.resolve(e.data)}),n.promise),m(c.selectedYear)]).then(function(e){u=e[0],c.isMyTask=e[1],c.listTimeline=e[2],c.timeline.Status=c.listTimeline.find(function(e){return e.Id===c.timeline.Id}).Status,c.isMyTask,c.status=null!==u&&""!==u?u.Status:"Pending",c.isEditable="Open"===c.timeline.Status&&c.isMyTask&&("Pending"===c.status||"Rejected"===c.status)||"CTG"===c.roleName,c.onTimelineChange({timeline:c.timeline,isEditable:c.isEditable,dataStatus:c.status}),c.isActivePage=!0})}c.selectTimeline=o,c.loadTimeline=function(){s.put("vm.selectedYear",c.selectedYear),n.getTimelines(c.selectedYear).then(function(e){if(c.listTimeline=e.data,0<e.data.length){if(c.isYearData){var t=e.data.find(function(e){return 0<=e.Planning.indexOf("BP")});c.listTimeline=[],c.listTimeline.push(t),c.timeline=""}}else c.timeline={},c.timeline.Id=-1;o()})},c.submitData=function(){l.submitData(d,c.timeline.Id,null).then(function(e){e.data,o()})},c.rejectData=function(){l.rejectData(d,c.timeline.Id,null).then(function(e){e.data,o()})},c.getListTimeline=m,c.$onInit=function(){var t,n;c.selectedYear=(new Date).getFullYear()+1,null!==s.get("vm.selectedYear")&&(c.selectedYear=s.get("vm.selectedYear")),void 0!==s.get("vm.timeline")&&""!==s.get("vm.timeline")&&(c.timeline=JSON.parse(s.get("vm.timeline")),console.log("vm.timeline.Id: "+c.timeline.Id)),i.all([(n=i.defer(),r.getListYear().then(function(e){n.resolve(e.data)}),n.promise),(t=i.defer(),r.getCurrentRoleName().then(function(e){t.resolve(e.data)}),t.promise),m(c.selectedYear)]).then(function(e){c.listYear=e[0],c.roleName=e[1],c.listTimeline=e[2];var t=c.listTimeline.find(function(e){return e.Id===c.timeline.Id});null!=t&&(c.timeline.Status=t.Status),c.canReject="CTG"===c.roleName,c.ctrlActivate(),o()})}}angular.module("BPT.components").component("timelineSelectionComponent",{bindings:{onTimelineChange:"&",ctrlActivate:"&",isYearData:"<"},controller:t,controllerAs:"vm",templateUrl:e+"app/components/timelineSelection/timelineSelection.tpl.html"}),t.$inject=["timelineService","utilitiesService","commonService","homeService","$location","$q","$cookies"]}(),function(){"use strict";var e=$("base").first().attr("href");function t(){this.$onInit=function(){}}angular.module("BPT.components").component("sidebarComponent",{controller:t,controllerAs:"vm",templateUrl:e+"app/components/sidebar/sidebar.tpl.html"}),t.$inject=[]}(),function(){"use strict";function e(e,t,n,r){var o=this;function a(){o.year=(new Date).getFullYear(),o.currentUser=currenrUser,o.roleName=o.currentUser.Role.RoleName,e.gethomepage().then(function(e){o.timelineList=e.data.TimelineList,o.myProcessStatusList=e.data.MyProcessStatusList,o.adminProcessMgm=e.data.AdminProcessMgm;var t=o.timelineList.filter(function(e){return"Open"===e.Status});0<t.length&&n.getBudgetOwnersByNTID(o.currentUser.NTID,t[0].Id).then(function(e){o.departments=e.data,o.isHavingPendingTasks=!1,null!==o.myProcessStatusList&&void 0!==o.myProcessStatusList&&(o.myPendingProcessStatusList=o.myProcessStatusList.filter(function(t){var e;switch(o.roleName){case"DH":e=t.IsActive&&("Pending"===t.Status||"Rejected"===t.Status)&&t.RoleName.startsWith(o.roleName)&&0<o.departments.filter(function(e){return e.FundName===t.FundCenterName}).length;break;case"HRL":e=t.IsActive&&("Pending"===t.Status||"Rejected"===t.Status)&&t.RoleName.startsWith(o.roleName)&&0<o.departments.filter(function(e){return e.FundName===t.FundCenterName}).length;break;default:e=t.IsActive&&("Pending"===t.Status||"Rejected"===t.Status)&&t.RoleName.startsWith(o.roleName)}return e}),o.isHavingPendingTasks=0<o.myPendingProcessStatusList.length&&("CTG"===o.roleName||o.roleName.startsWith("HR")||o.roleName.startsWith("DH")),o.mySubmittedProcessStatusList=o.myProcessStatusList.filter(function(e){return e.IsActive&&"Submitted"===e.Status&&"DEPARTMENT"===e.GroupMenu&&e.RoleName.startsWith(o.roleName)}),o.myCompletedProcessStatusList=o.myProcessStatusList.filter(function(e){return e.IsActive&&("Approved"===e.Status&&"DEPARTMENT"===e.GroupMenu||"Submitted"===e.Status&&"DEPARTMENT"!==e.GroupMenu)&&e.RoleName.startsWith(o.roleName)}))})})}o.timelineList=[],o.myProcessStatusList=[],o.myPendingProcessStatusList=[],o.mySubmittedProcessStatusList=[],o.myCompletedProcessStatusList=[],o.adminProcessMgm={},o.year,o.submitPendingTasks=function(){o.openedTimeline=o.timelineList.find(function(e){var t="Open"===e.Status;return t}),e.submitListPendingTask(o.openedTimeline.Id).then(function(e){a()})},a()}angular.module("BPT").controller("HomeController",e),e.$inject=["homeService","commonService","budgetOwnerService","$q"]}(),function(){"use strict";function e(n,e,t,r,o,a){var l=this;l.getUsers=i,l.deleteUser=function(e){n.deleteUser(e).then(function(e){i()},function(e){})},l.create=function(e){e.ID=0,n.createUser(e).then(function(e){e.data&&(i(),l.user={})})},l.update=function(t){n.updateUser(t).then(function(e){i()},function(e){angular.copy(l.rollBackEditUser,t)})},l.initUpdateUser=function(e){l.selectedDepartment=null,angular.copy(e,l.rollBackEditUser),l.edituser=e,l.edituser.Name=e.Name},l.initDeleteUser=function(e){l.deleteuser=e},l.cancelEdit=function(e){angular.copy(l.rollBackEditUser,e)},i(),l.user={},l.rollBackEditUser={},l.deleteuser={},l.departments=[],l.roles=[];r.baseUrl;function i(){n.getUsers().then(function(e){l.users=e.data})}o(function(){$(function(){}),$("#addNewUser").on("shown.bs.modal",function(){$(this).find("#role").focus()}),$("#editUser").on("shown.bs.modal",function(){$(this).find("#editrole").focus()})},1e3)}angular.module("BPT").controller("UserController",e),e.$inject=["userService","utilitiesService","$window","env","$timeout","$filter"]}(),function(){"use strict";function e(t,e,n){var r=this;r.getAllMenu=a,r.goToIndex=l,r.create=function(e){t.createMenu(e).then(function(e){e.data&&(l(),a())})},r.update=function(e){t.updateMenu(e).then(function(e){e.data&&(l(),a())})},r.getMenu=function(e){t.getMenu(e).then(function(e){r.Menu=e.data})},r.initUpdateMenu=function(e){angular.copy(e,r.rollBackEditMenu),r.editMenu=e},r.initDeleteMenu=function(e){r.deleteMenu=e},r.menu={},r.rollBackEditMenu={},function(){a();window.location.href.split("/")}();var o=n.baseUrl;function a(){t.getAllMenu().then(function(e){r.allMenu=e.data})}function l(){e.location.href=o+"#/home/menu"}}angular.module("BPT").controller("MenuController",e),e.$inject=["menuService","$window","env"]}(),function(){"use strict";function e(n,r){return{getUsers:function(){return n.get("Users")},createUser:function(e){return n.post("Users/Create",e)},updateUser:function(e){return n.post("Users/Update",e)},deleteUser:function(e){return n.get("Users/Delete/"+e)},searchEmployees:function(e){var t="Users/searchEmployees?filter={0}&departmentId={1}&departmentName={2}";return t=r.formatStringWithParams(t,e.filter,e.departmentId,e.departmentName),n.get(t,e)}}}angular.module("BPT").factory("userService",e),e.$inject=["httpService","utilitiesService"]}();