<div class="container">
    <div class="col-md-4">
        <div class="box box-default">
            <div class="box-header with-border">
                <h3 class="box-title">Plans ({{vm.year}})</h3>
            </div>
            <div class="box-body" style="overflow-y: auto;height: 600px;">
                <div class="form-group">
                    <div>
                        <b>OPENING</b>
                    </div>
                    <table class="table table-striped table-hover table-bordered full-width-table">
                        <thead>
                            <tr>
                                <th class="col-xs-4 text-center">
                                    Plan Name
                                </th>
                                <th class="col-xs-3 text-center">Duration</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="timeline in vm.timelineList | filter : {Status : 'Open'}">
                                <td class="text-center">
                                    {{timeline.Planning}} {{timeline.Year}}
                                </td>
                                <td>{{timeline.StartDate| date:'dd/MM/yyyy'}} - {{timeline.EndDate| date:'dd/MM/yyyy'}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="form-group">
                    <div>
                        <b>CLOSED</b>
                    </div>
                    <table class="table table-striped table-hover table-bordered full-width-table">
                        <thead>
                            <tr>
                                <th class="col-xs-4 text-center">
                                    Plan Name
                                </th>
                                <th class="col-xs-3 text-center">Duration</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="timeline in vm.timelineList | filter : {Status : 'Close'}">
                                <td class="text-center">
                                    {{timeline.Planning}} {{timeline.Year}}
                                </td>
                                <td>{{timeline.StartDate| date:'dd/MM/yyyy'}} - {{timeline.EndDate| date:'dd/MM/yyyy'}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="form-group" style="display: none">
                    <div>
                        <b>LOCKED</b>
                    </div>
                    <table class="table table-striped table-hover table-bordered full-width-table">
                        <thead>
                            <tr>
                                <th class="col-xs-4 text-center">
                                    Plan Name
                                </th>
                                <th class="col-xs-3 text-center">Duration</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="timeline in vm.timelineList | filter : {Status : 'Lock'}">
                                <td class="text-center">
                                    {{timeline.Planning}} {{timeline.Year}}
                                </td>
                                <td>{{timeline.StartDate| date:'dd/MM/yyyy'}} - {{timeline.EndDate| date:'dd/MM/yyyy'}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-8">
        <div class="box box-default">
            <div class="box-header with-border form-inline">
                <h3 class="box-title">My tasks ({{vm.year}})</h3>
                <button ng-if="vm.isHavingPendingTasks" name="btnSubmit" id="btnSubmit" class="btn btn-primary form-control" ng-click="vm.submitPendingTasks()">Submit All</button>
            </div>
            <div class="box-body" style="overflow-y: auto;height: 600px;">
                <div class="form-group">
                    <div>
                        <b>Pending Tasks</b>
                    </div>
                    <table class="table table-striped table-hover table-bordered full-width-table">
                        <thead>
                            <tr>
                                <th class="text-center">
                                    Task Name
                                </th>
                                <th class="text-center">
                                    Type
                                </th>
                                <th class="text-center">
                                    Group
                                </th>
                                <th class="text-center">
                                    Plan
                                </th>
                                <th class="text-center">
                                    Function
                                </th>
                                <th class="text-center">
                                    Status
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="process in vm.myPendingProcessStatusList">
                                <td>
                                    <a href="{{process.URL}}">{{process.MenuName}}</a>
                                </td>
                                <td>
                                    {{process.DataType}}
                                </td>
                                <td>
                                    {{process.GroupMenu}}
                                </td>
                                <td>
                                    {{process.Plan}}
                                </td>
                                <td>
                                    {{process.FundCenterName}}
                                </td>
                                <td>
                                    {{process.Status == 'Rejected' ? 'Pending' : process.Status}}
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <div>
                        <b>Submitted Tasks</b>
                    </div>
                    <table class="table table-striped table-hover table-bordered full-width-table">
                        <thead>
                            <tr>
                                <th class="text-center">
                                    Task Name
                                </th>
                                <th class="text-center">
                                    Type
                                </th>
                                <th class="text-center">
                                    Plan
                                </th>
                                <th class="text-center">
                                    Function
                                </th>
                                <th class="col-xs-3 text-center">Submitted Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="process in vm.mySubmittedProcessStatusList">
                                <td>
                                    <a href="{{process.URL}}">{{process.MenuName}}</a>
                                </td>
                                <td>
                                    {{process.DataType}}
                                </td>
                                <td class="text-center">
                                    {{process.Plan}}
                                </td>
                                <td class="text-center">
                                    {{process.FundCenterName}}
                                </td>
                                <td>{{process.SubmittedDate | date:'dd/MM/yyyy'}}</td>
                            </tr>
                        </tbody>
                    </table>

                    <div>
                        <b>Completed Tasks</b>
                    </div>
                    <table class="table table-striped table-hover table-bordered full-width-table">
                        <thead>
                            <tr>
                                <th class="text-center">
                                    Task Name
                                </th>
                                <th class="text-center">
                                    Status
                                </th>
                                <th class="text-center">
                                    Plan
                                </th>
                                <th class="text-center">
                                    Function
                                </th>
                                <th class="col-xs-3 text-center">Last Updated Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="process in vm.myCompletedProcessStatusList" ng-if="process.Status=='Submitted' || process.Status=='Approved'">
                                <td>
                                    <a href="{{process.URL}}">{{process.MenuName}}</a>
                                </td>
                                <td>{{process.Status}}</td>
                                <td class="text-center">
                                    {{process.Plan}}
                                </td>
                                <td class="text-center">
                                    {{process.FundCenterName}}
                                </td>
                                <td>{{process.SubmittedDate | date:'dd/MM/yyyy'}}</td>
                            </tr>
                        </tbody>
                    </table>

                </div>
            </div>
        </div>
    </div>

    <div class="col-md-12">
        <div class="box box-default">
            <div class="box-header with-border">
                <h3 class="box-title">Process Management</h3>
            </div>
            <div class="box-body">
                <div>
                    Start: {{vm.adminProcessMgm.StartDate | date:'dd/MM/yyyy' }} - End: {{vm.adminProcessMgm.EndDate | date:'dd/MM/yyyy' }}
                </div>
                <table class="table full-width-table process-management">
                    <tbody>
                        <tr>
                            <!--<td class="text-center">
                                <div class="btn btn-primary" style="border-radius:25px; height:50px; line-height:21px">
                                    Start
                                    <br />
                                    {{vm.adminProcessMgm.StartDate | date:'dd/MM/yyyy' }}
                                </div>
                            </td>
                            <td class="text-center">
                                <i class="fa fa-arrow-right" aria-hidden="true"></i>
                            </td>-->

                            <!-- CTG input -->
                            <td class="col-xs-3 text-center">
                                <i class="fa fa-street-view" aria-hidden="true" style="font-size: 4em;"></i>
                                <br />
                                <label class="header">CTG input</label> 
                                
                                <div role="tablist" aria-multiselectable="true" style="text-align:left" ng-show="currentUser.RoleName=='CTG'">
                                    <div class="card"  ng-repeat="processGroup in vm.adminProcessMgm.AdminProcessGroup | filter : {RoleName : 'CTG'}">
                                        <div ng-if="processGroup.DataType !== 'BUDGET CONSOLIDATION'">
                                            <div class="card-header" role="tab" id="heading{{processGroup.DataTypeCode + processGroup.RoleName}}">
                                                <h5 class="mb-0">
                                                    <button type="button" class="btn btn-primary" data-toggle="collapse" data-parent="#accordion" data-target="#collapse{{processGroup.DataTypeCode + processGroup.RoleName}}" aria-expanded="false" aria-controls="collapseMasterOne">
                                                        <b>{{processGroup.DataType}}</b> - {{processGroup.Status}}
                                                    </button>
                                                </h5>
                                                <div id="collapse{{processGroup.DataTypeCode + processGroup.RoleName}}" class="collapse" role="tabpanel" aria-labelledby="heading{{processGroup.DataTypeCode + processGroup.RoleName}}">
                                                    <div class="card-block">
                                                        <p ng-repeat="process in vm.adminProcessMgm.AllProcessStatusList | filter : {RoleName : 'CTG'}" ng-if="process.DataType == processGroup.DataType">
                                                            <a href="{{process.URL}}">{{process.MenuName}}</a> - {{process.Status}}
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                    </div>
                                </div>
                            </td>
                            <td class="text-center">
                                <i class="fa fa-arrow-right" aria-hidden="true" style="font-size: 2em;"></i>
                            </td>

                            <!-- HR input -->
                            <td class="col-xs-3 text-center">
                                <i class="fa fa-street-view" aria-hidden="true" style="font-size: 4em;"></i>
                                <br />
                                <label class="header">HR input</label>                                

                                <div role="tablist" aria-multiselectable="true" style="text-align:left" ng-show="currentUser.RoleName=='CTG' || currentUser.RoleName=='HRL' || currentUser.RoleName=='HRC'">
                                    <div class="card" ng-repeat="processGroup in vm.adminProcessMgm.AdminProcessGroup  | filter : {RoleName : 'HR'}">
                                        <div class="card-header" role="tab" id="heading{{processGroup.DataTypeCode + processGroup.RoleName}}">
                                            <h5 class="mb-0">
                                                <button type="button" class="btn btn-primary" data-toggle="collapse" data-parent="#accordion" data-target="#collapse{{processGroup.DataTypeCode + processGroup.RoleName}}" aria-expanded="false" aria-controls="collapseMasterOne">
                                                    <b>{{processGroup.DataType}}</b> - {{processGroup.Status}}
                                                </button>
                                            </h5>
                                            <div id="collapse{{processGroup.DataTypeCode + processGroup.RoleName}}" class="collapse" role="tabpanel" aria-labelledby="heading{{processGroup.DataTypeCode + processGroup.RoleName}}">
                                                <div class="card-block">
                                                    <p ng-repeat="process in vm.adminProcessMgm.AllProcessStatusList | filter : {RoleName : 'HR'}" ng-if="process.DataType == processGroup.DataType">
                                                        <a href="{{process.URL}}">{{process.MenuName}}</a> - {{process.Status}}
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>                                
                            </td>
                            <td class="text-center">
                                <i class="fa fa-arrow-right" aria-hidden="true" style="font-size: 2em;"></i>
                            </td>

                            <!-- DH input -->
                            <td class="col-xs-3 text-center">
                                <i class="fa fa-street-view" aria-hidden="true" style="font-size: 4em;"></i>
                                <br />
                                <label class="header">Department input</label>                                
                                <div style="text-align:center" ng-show="currentUser.RoleName=='CTG' || currentUser.RoleName=='DH'">
                                    <p ng-repeat="processGroup in vm.adminProcessMgm.AdminProcessGroup  | filter : {RoleName : 'DH'}">
                                        <a href="#/ctg/capacitynrecruitment">{{processGroup.FundCenter}}</a> {{processGroup.Status}}
                                    </p>
                                </div>
                            </td>
                            <td class="text-center">
                                <i class="fa fa-arrow-right" aria-hidden="true" style="font-size: 2em;"></i>
                            </td>

                            <!-- CTG cosolidate -->
                            <td class="col-xs-3 text-center">
                                <i class="fa fa-street-view" aria-hidden="true" style="font-size: 4em;"></i>
                                <br />
                                <label class="header">CTG Consolidate</label>
                                <div role="tablist" aria-multiselectable="true" style="text-align:left" ng-show="currentUser.RoleName=='CTG'">
                                    <div class="card" ng-repeat="processGroup in vm.adminProcessMgm.AdminProcessGroup | filter : {RoleName : 'CTG', DataType: 'BUDGET CONSOLIDATION'}">
                                        <div class="card-header" role="tab" id="heading{{processGroup.DataTypeCode + processGroup.RoleName}}">
                                            <h5 class="mb-0">
                                                <button type="button" class="btn btn-primary" data-toggle="collapse" data-parent="#accordion" data-target="#collapse{{processGroup.DataTypeCode + processGroup.RoleName}}" aria-expanded="false" aria-controls="collapseMasterOne">
                                                    <b>{{processGroup.DataType}}</b> - {{processGroup.Status}}
                                                </button>
                                            </h5>
                                            <div id="collapse{{processGroup.DataTypeCode + processGroup.RoleName}}" class="collapse" role="tabpanel" aria-labelledby="heading{{processGroup.DataTypeCode + processGroup.RoleName}}">
                                                <div class="card-block">
                                                    <p ng-repeat="process in vm.adminProcessMgm.AllProcessStatusList | filter : {RoleName : 'CTG'}" ng-if="process.DataType == processGroup.DataType">
                                                        <a href="{{process.URL}}">{{process.MenuName}}</a> - {{process.Status}}
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </td>
                            <td class="text-center">
                                <i class="fa fa-arrow-right" aria-hidden="true" style="font-size: 2em;"></i>
                            </td>

                            <!-- GM -->
                            <td class="col-xs-3 text-center">
                                <i class="fa fa-street-view" aria-hidden="true" style="font-size: 4em;"></i>
                                <br />
                                <label class="header">GM</label>
                            </td>

                            <!--<td class="text-center">
                                <i class="fa fa-arrow-right" aria-hidden="true" style="font-size: 2em;"></i>
                            </td>                            
                            <td class="text-center">
                                <div class="btn btn-primary" style="border-radius:25px; height:50px; line-height:21px">
                                    End
                                    <br />
                                    {{vm.adminProcessMgm.EndDate | date:'dd/MM/yyyy' }}
                                </div>
                            </td>-->
                        </tr>                        
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>